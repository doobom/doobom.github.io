<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>oops: run - android</title><link href="https://doobom.me/" rel="alternate"></link><link href="https://doobom.me/feeds/android.atom.xml" rel="self"></link><id>https://doobom.me/</id><updated>2021-01-22T21:45:30+08:00</updated><subtitle>keep running...</subtitle><entry><title>How To Use Crontab In Android?</title><link href="https://doobom.me/how-to-use-crontab-in-android" rel="alternate"></link><published>2021-01-22T21:45:30+08:00</published><updated>2021-01-22T21:45:30+08:00</updated><author><name>doobom</name></author><id>tag:doobom.me,2021-01-22:/how-to-use-crontab-in-android</id><summary type="html">&lt;p&gt;在安卓(android) 上打开 计划任务 的功能，就是&amp;nbsp;crontab&lt;/p&gt;</summary><content type="html">&lt;p&gt;首先，你得 root ,&amp;nbsp;如果没有，那没戏了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;以下原文： &lt;a href="https://stackoverflow.com/questions/16747880/how-to-use-crontab-in-android"&gt;How to use crontab in&amp;nbsp;Android?&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Requirements&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Root access: for superuser commads like reboot, or init.d config. Crond can still run under normal user&amp;nbsp;privs.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Busybox: for &amp;#8216;crond&amp;#8217;&amp;nbsp;service&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(Optional) init.d support: to start &amp;#8216;crond&amp;#8217; service at boot. Or start via Magisk post-fs-data.d&amp;nbsp;script.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Creating&amp;nbsp;cronjob&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Create the cronjob file in directory &lt;code&gt;/data/crontab/&lt;/code&gt; (it could be any accessible directory even in sdcard) with filename &amp;#8216;&lt;code&gt;root&lt;/code&gt;&lt;span class="quo"&gt;&amp;#8216;&lt;/span&gt;. Write your cronjob inside the file&amp;nbsp;&amp;#8216;root&amp;#8217;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;53 * * * * reboot&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; /data/crontab/root&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Test without&amp;nbsp;rebooting&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Now open any terminal emulator in device and run the following&amp;nbsp;commands..&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;su -&lt;/span&gt;
&lt;span class="code-line"&gt;crond -b -c /data/crontab&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now the crond service will start, to check type &lt;code&gt;pgrep -l crond&lt;/code&gt; or &lt;code&gt;ps | grep crond&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Start crond at&amp;nbsp;boot&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;create a file at &lt;code&gt;/system/etc/init.d&lt;/code&gt; with executable&amp;nbsp;permission:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;crond -b -c /data/crontab&amp;#39;&lt;/span&gt; &amp;gt; /system/etc/init.d/crond&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;chmod +x /system/etc/init.d/crond&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Example&amp;nbsp;cronjobs&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="m"&gt;53&lt;/span&gt; * * * * reboot&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Will reboot your device on 53rd minute of every&amp;nbsp;hour.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="admonition-title"&gt;Note&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;If you modify crontab, remember to restart crond daemon after killing the existing&amp;nbsp;one.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If the crond is not obeying your timezone, you might need to update the tzdata in your&amp;nbsp;device.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Better to test with &lt;code&gt;*/1 * * * *&lt;/code&gt; to see if it is&amp;nbsp;working.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;hr /&gt;
&lt;p&gt;因为我没在 &lt;code&gt;/system/etc&lt;/code&gt; 目录下找到 &lt;code&gt;init.d&lt;/code&gt; ,&amp;nbsp;因此我是这么着的：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;crond -b -c /data/crontab&amp;#39;&lt;/span&gt; &amp;gt; /data/adb/service.d/crond&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;chmod +x /data/adb/service.d/crond&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;本来吧，我是准备把 &lt;code&gt;crontab&lt;/code&gt; 目录放到 &lt;span class="caps"&gt;SD&lt;/span&gt;&amp;nbsp;卡上的，试了一下，启动的时候识别不到，因此放弃了。&lt;/p&gt;
&lt;p&gt;所以，如果你有什么需要在启动的时候运行的话，可以把脚本放在 &lt;code&gt;/data/adb/service.d&lt;/code&gt; 或是 &lt;code&gt;/data/adb/post-fs-data.d&lt;/code&gt; 目录里面就可以了。&lt;/p&gt;
&lt;p&gt;具体可以参考： &lt;a href="https://github.com/topjohnwu/Magisk/blob/master/docs/guides.md#boot-scripts"&gt;Magisk: Developer&amp;nbsp;Guides&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;还有一个详细介绍 Crond 的: &lt;a href="https://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/"&gt;How To Add Jobs To cron Under Linux or &lt;span class="caps"&gt;UNIX&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;用 &lt;code&gt;termux&lt;/code&gt; 实现应该也是可以的，具体没有试，可以参考： &lt;a href="https://www.reddit.com/r/termux/comments/i27szk/how_do_i_crontab_on_termux/"&gt;How do I Crontab on&amp;nbsp;Termux..&lt;/a&gt;&lt;/p&gt;</content><category term="android"></category><category term="android"></category><category term="crond"></category><category term="crontab"></category></entry><entry><title>小米 9se 手机自定义启动画面 splash/logo</title><link href="https://doobom.me/mi9se-splash-logo-image-modify" rel="alternate"></link><published>2021-01-20T21:12:54+08:00</published><updated>2021-01-20T21:12:54+08:00</updated><author><name>doobom</name></author><id>tag:doobom.me,2021-01-20:/mi9se-splash-logo-image-modify</id><summary type="html">&lt;p&gt;折腾一下 小米 9se 的 splash, 就是刚启动开机时显示的那个 logo&amp;nbsp;画面&lt;/p&gt;</summary><content type="html">&lt;p&gt;网上一直找不到 mi9se 的 splash 的做法，找了好一会儿找到红米4 的 splash 脚本，毕竟太老估计没参考价值，然后在 &lt;span class="caps"&gt;XDA&lt;/span&gt; 上找到了 mi9 的： &lt;a href="https://forum.xda-developers.com/t/mi-9-splash-boot-image-creation-script.3952572/"&gt;Mi 9 Splash / Boot Image creation script.&lt;/a&gt; ,&amp;nbsp;嗯，看来有戏。&lt;/p&gt;
&lt;p&gt;首先&lt;/p&gt;
&lt;p&gt;把 &lt;code&gt;logo&lt;/code&gt; 分区 &lt;code&gt;dd&lt;/code&gt; 下来，毕竟我是有 root 的人，我记得以前都是在 &lt;code&gt;splash&lt;/code&gt; 分区的，我也一起 &lt;code&gt;dd&lt;/code&gt; 了，根据上面 &lt;span class="caps"&gt;XDA&lt;/span&gt; 的文，不在 &lt;code&gt;splash&lt;/code&gt; 分区，我也看了 &lt;code&gt;splash.img&lt;/code&gt;, 都是填充的 &lt;code&gt;00&lt;/code&gt; ：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;su&lt;/span&gt;
&lt;span class="code-line"&gt;dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/block/bootdevice/by-name/logo &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/sdcard/logo.img&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;根据 &lt;span class="caps"&gt;XDA&lt;/span&gt; 上所说在偏移量 &lt;code&gt;0x4000&lt;/code&gt; 位置定义了 &lt;code&gt;logo&lt;/code&gt; 相关图片的信息，look:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="images/a002-1.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;折腾了一下，还是跟 mi9&amp;nbsp;有些差别，其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;0x5000&lt;/code&gt;:&amp;nbsp;第一张图片位置&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0x740000&lt;/code&gt;:&amp;nbsp;第二张图片位置&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0xe7b000&lt;/code&gt;:&amp;nbsp;第三张图片位置&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0x15b6000&lt;/code&gt;:&amp;nbsp;第四张图片位置&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0x1cf1000&lt;/code&gt;:&amp;nbsp;第五张图片位置&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;前四张图片大小均为 &lt;code&gt;0x73b000&lt;/code&gt;, 第五张图片大小 &lt;code&gt;0x26a000&lt;/code&gt;, 为了知道每张图的作用，我得把图导出来看看，所以 WinHEX&amp;nbsp;是个神器啊：&lt;/p&gt;
&lt;p&gt;首先 &lt;code&gt;编辑&lt;/code&gt; &amp;gt; &lt;code&gt;定义选块&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="images/a002-2.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;接首 &lt;code&gt;编辑&lt;/code&gt; &amp;gt; &lt;code&gt;复制选块&lt;/code&gt; &amp;gt; &lt;code&gt;至新文件&lt;/code&gt; , 保存为 &lt;code&gt;bmp&lt;/code&gt; 就是图片了。图片全导出后就知道每张图的作用了。&lt;/p&gt;
&lt;p&gt;图片定义：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pic1.bmp&lt;/code&gt; :&amp;nbsp;启动画面&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pic2.bmp&lt;/code&gt; : fastboot&amp;nbsp;画面&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pic3.bmp&lt;/code&gt; :&amp;nbsp;未解锁画面&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pic4.bmp&lt;/code&gt; :&amp;nbsp;已经解锁画面&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pic5.bmp&lt;/code&gt; :&amp;nbsp;系统损坏&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后能看出 1~4 的图片一样大小，所以我就在想是不是参数一样的 位图 都是一样大小的，经我这菜鸡 ps 高手确认过眼神，是的。所以最后一张是 8 位的，ps 导不出 8 位的&amp;nbsp;位图。也许是我操作不对。&lt;/p&gt;
&lt;p&gt;最后我最后一图也是用的 24 位的，修改了最后一图的&amp;nbsp;文件大小。试一下嘛。&lt;/p&gt;
&lt;p&gt;拿了 &lt;span class="caps"&gt;XDA&lt;/span&gt; 上找到的 &lt;code&gt;mi9_logo-1080-2340.py&lt;/code&gt; 修改了一下， 我把它取名 &lt;code&gt;mi9se_logo-1080-2340.py&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;io&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;offset0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x4000&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;offset1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x5000&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;offset2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x740000&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;offset3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xE7B000&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;offset4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x15B6000&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;offset5&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x1CF1000&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;logo_new_mi9se.img&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;wb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 8bit @pic5.bmp&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;emptyContent0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0x1F5B000&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 24bit @pic5.bmp&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;emptyContent1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0x242C000&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 8bit @pic5.bmp&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;mi9seOffset0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;0x4C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x4F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x47&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x4F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x05&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;               &lt;span class="mh"&gt;0x7B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x0E&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0xB6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0xF1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x1C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;               &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x6A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x02&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 24bit @pic5.bmp&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;mi9seOffset1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;0x4C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x4F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x47&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x4F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x05&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;               &lt;span class="mh"&gt;0x7B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x0E&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0xB6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0xF1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x1C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;               &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x3B&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x07&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;bytearray&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;emptyContent1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;offset0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;bytearray&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mi9seOffset1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;offset1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pic1.bmp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;offset2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pic2.bmp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;offset3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pic3.bmp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;offset4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pic4.bmp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;seek&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;offset5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;pic5.bmp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;outpt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;找了几张帅气的照片转成 &lt;code&gt;bmp&lt;/code&gt; ，激动的运行 &lt;code&gt;python mi9se_logo-1080-2340.py&lt;/code&gt;, 就有了 &lt;code&gt;logo_new_mi9se.img&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;然后&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;fastboot flash logo logo_new_mi9se.img&lt;/span&gt;
&lt;span class="code-line"&gt;fastboot reboot&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;结果出来了，就是我那帅气的照片。&lt;/p&gt;
&lt;p&gt;另外根据 github 上的 &lt;a href="https://github.com/Danct12/Xiaomi_Splash_Creator"&gt;Xiaomi_Splash_Creator&lt;/a&gt; 源码，我就把 &lt;code&gt;dd&lt;/code&gt; 出来的 &lt;code&gt;logo.img&lt;/code&gt; 从 &lt;code&gt;0x00&lt;/code&gt; 到 &lt;code&gt;0x5000&lt;/code&gt; 导出做为头文件，然后：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cat mi9se/header1.img pic1.bmp pic2.bmp pic3.bmp pic4.bmp pic5.bmp &amp;gt; logo_new_mi9se.img&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;刷了进去，效果一毛一样的。&lt;/p&gt;
&lt;p&gt;到此结束。&lt;/p&gt;
&lt;p&gt;稍等一下，我把这些放 github 上了： &lt;a href="https://github.com/doobom/mi9-mi9se-logo-image-creation-script"&gt;mi9-mi9se-logo-image-creation-script&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;参考的文中都有提了，就不另列出来了。&lt;/p&gt;</content><category term="android"></category><category term="miui"></category><category term="mi9se"></category><category term="android"></category><category term="splash"></category><category term="logo"></category></entry><entry><title>小米9se 刷机并解锁 Google Now</title><link href="https://doobom.me/mi9se-flash-miui12-enable-google-now" rel="alternate"></link><published>2021-01-13T22:45:05+08:00</published><updated>2021-01-13T22:45:05+08:00</updated><author><name>doobom</name></author><id>tag:doobom.me,2021-01-13:/mi9se-flash-miui12-enable-google-now</id><summary type="html">&lt;p&gt;小米 9se 刷最新的 miui12，并刷入 谷歌全家桶，再打开 Google Now&amp;nbsp;的折腾经历&lt;/p&gt;</summary><content type="html">&lt;p&gt;事情起因是这样子的，本来吧，我只是想重置一下手机的，当然并不是在设置菜单里面点击恢复出产设置，或是清除数据什么的，做为~资深玩家~的菜鸡，当然是去到 Recovery 里面清，所以不小心勾上了&amp;nbsp;System，行吧，没了。&lt;/p&gt;
&lt;p&gt;即然都这样子了，那。。。那就来一发吧。&lt;/p&gt;
&lt;p&gt;首先下载了国际版的 9se 的线刷固件，然后下了最新版的 &lt;a href="https://twrp.me"&gt;twrp&lt;/a&gt; ，不过吧，&lt;a href="https://xiaomi.eu"&gt;xiaomi.eu&lt;/a&gt; 发布的固件呼声也很高嘛，所以一起下了个最新版的周更版固件，当然还下了其它的一些，最新周更版的是 miui12,android11 的，gapps 也是必不可少的嘛，刷了安卓，没有刷 gapp 是没有灵魂的，没有 root 也是没有灵魂的，所以下了 magisk v21，没有 google now&amp;nbsp;怎么行？&lt;/p&gt;
&lt;h2 id="1"&gt;折腾 1:&lt;a class="headerlink" href="#1" title="Permanent link"&gt; &lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;我目前用的是苹果电脑，所以得安装 &lt;span class="caps"&gt;ADB&lt;/span&gt; 吧，根据 &lt;a href="https://stackoverflow.com/questions/31374085/installing-adb-on-macos"&gt;Installing &lt;span class="caps"&gt;ADB&lt;/span&gt; on macOS&lt;/a&gt;&amp;nbsp;所说的也就完事了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;#Install the homebrew package manager&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/bin/bash -c &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#Install adb&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;brew install android-platform-tools&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#Start using adb&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;adb devices&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;用小米工具线刷 rom ,这个吧就是等他一会儿就好了，然后重启，因为刷了原版 rom , 所以 recovery&amp;nbsp;必定是回到了自带了，必须干掉是吧。&lt;/p&gt;
&lt;p&gt;然后刷&amp;nbsp;twrp:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;fastboot flash recovery twrp-3.5.0.img&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;网上说的各种姿势防止回到 原厂&amp;nbsp;recovery：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;用上面的命令完了后再用下面命令重启&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;fastboot boot twrp-3.5.0.img&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;然而，我的手机会重启到系统，并不会重启到&amp;nbsp;recovery，所以失败了&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;刷完 twrp 用 音量+ 和 电源键 长按进入 recovery，然后用 twrp 的安装功能再刷一次 &lt;code&gt;twrp-3.5.0.img&lt;/code&gt; 然而我重启了之后依然是回到了原产。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;我改一下刷机包，线刷的时候直接刷 twrp&amp;nbsp;试试，然而还是失败了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;所以一度想要放弃 android 11 ，我以为吧，是固件的锅，最后想起以前下载的旧版，针对 mi9se 做的 twrp , 刷了之后发现里面有一个 boot 签名的功能，果断运行一下，还真给固定了，所以是 boot 没有重签，导致系统验证恢复到 原厂 recovery, 然后再刷 3.5.0 的 twrp&amp;nbsp;就好了。&lt;/p&gt;
&lt;h2 id="2"&gt;折腾 2&lt;a class="headerlink" href="#2" title="Permanent link"&gt; &lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;当然是把 &lt;span class="caps"&gt;GAPPS&lt;/span&gt; 给刷进去，我下载的是 &lt;a href="https://www.cyanogenmods.org/android-11-gapps-download/"&gt;NikGApps&lt;/a&gt; 完整版的，&lt;a href="https://opengapps.org/"&gt;opengapps&lt;/a&gt; 没有 android 11 的，嗯，刷不进去，提示空间不足，首先我想到的是不安装一些吧。但是失败了，行吧，那就删 system&amp;nbsp;里面的我觉得不要的软件吧。&lt;/p&gt;
&lt;p&gt;为此我还整的一个 shell&amp;nbsp;脚本用来删不要的软件，过程很是酸爽啊。&lt;/p&gt;
&lt;p&gt;以下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/sbin/sh&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;********* Starting REMOVE&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 要删除的软件列表&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;appsList&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Browser&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Calculator&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Calendar&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;CleanMaster&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;DeskClock&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;DocumentsUIGoogle&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Email&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;FileExplorer&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Health&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;InCallUI&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiDrive&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiGalleryLockscreen&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiMover&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiuiBugReport&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiuiCompass&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiuiGallery&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiuiScanner&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiuiScreenRecorder&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiuiVideoGlobal&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Music&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;NextPay&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Notes&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PeelMiRemote&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PersonalAssistant&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;QuickSearchBox&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SoundRecorder&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SuperWallpaperEarth&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SuperWallpaperGeometry&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SuperWallpaperMars&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SuperWallpaperSaturn&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SuperWallpaperSnowmountain&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiService&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Weather&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;wps-lite&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MiuiWallpaper&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;LiveWallpapersPicker&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;WallpaperBackup&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 这几个软件如果删了就没有壁纸功能了，设置了也没有用&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#&amp;quot;MiuiWallpaper&amp;quot; &amp;quot;LiveWallpapersPicker&amp;quot; &amp;quot;WallpaperBackup&amp;quot;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;appsList&lt;/span&gt;&lt;span class="p"&gt;[@]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;do&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;/system/priv-app/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* Remove App: /system/priv-app/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        rm -rf /system/priv-app/&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;/system/app/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* Remove App: /system/app/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        rm -rf /system/app/&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;/data/app/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* Remove App: /data/app/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        rm -rf /data/app/&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;else&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;- Not Found &lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt; in /system/app/ or /system/priv-app/ or /data/app/&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;done&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;/system/media/wallpaper/wallpaper_group&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* Remove Wallpaper&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    rm -rf /system/media/wallpaper/wallpaper_group&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;/system/media/audio/ringtones/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* Remove ringtones&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    rm -rf /system/media/audio/ringtones/*&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot;/data/preloads/&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* Remove Preload Apps&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    rm -rf /data/preloads/*&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;********* REMOVE DONE&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;最后看了一下这些我不要的软件，1.2+G&amp;nbsp;啊。这下就可以轻松的上全家桶了。&lt;/p&gt;
&lt;h2 id="3"&gt;折腾 3&lt;a class="headerlink" href="#3" title="Permanent link"&gt; &lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;来点有 灵魂 的 root 吧，magisk&amp;nbsp;还是很轻松的就刷进去了，并且运行良好，没啥毛病。&lt;/p&gt;
&lt;p&gt;没插卡的时候 google now 正常，记得以前看过，只要禁用 google play service 的电话权限就可以了，但是吧，设置里面找不到。行吧，以前旧版 安卓 似乎修改 &lt;code&gt;build.prop&lt;/code&gt; 也是可以的。&lt;/p&gt;
&lt;p&gt;android 11 的 &lt;code&gt;build.prop&lt;/code&gt; 好几个位置都有，&lt;code&gt;system&lt;/code&gt;, &lt;code&gt;product&lt;/code&gt;, &lt;code&gt;vendor&lt;/code&gt;, &lt;code&gt;system_ext&lt;/code&gt; 里面都有。所以我全都把下面几个改了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;********* Modify Build.prop&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* modify build.prop&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.system\.model.*/ro\.product\.system\.model\=Pixel\ 5\ XL/g&amp;#39;&lt;/span&gt; /system/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.opa.eligible_device.*//g&amp;#39;&lt;/span&gt; /system/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ro.opa.eligible_device=true&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; /system/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.system\.brand.*/ro\.product\.system\.brand\=google/g&amp;#39;&lt;/span&gt; /system/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.system\.manufacturer.*/ro\.product\.system\.manufacturer\=Google/g&amp;#39;&lt;/span&gt; /system/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.manufacturer.*/ro\.product\.manufacturer\=Google/g&amp;#39;&lt;/span&gt; /system/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.product\.model.*/ro\.product\.product\.model\=Pixel\ 5\ XL/g&amp;#39;&lt;/span&gt; /system/product/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.product\.manufacturer.*/ro\.product\.product\.manufacturer\=Google/g&amp;#39;&lt;/span&gt; /system/product/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.product\.brand.*/ro\.product\.product\.brand\=google/g&amp;#39;&lt;/span&gt; /system/product/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.system_ext\.model.*/ro\.product\.system_ext\.model\=Pixel\ 5\ XL/g&amp;#39;&lt;/span&gt; /system/system_ext/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.system_ext\.manufacturer.*/ro\.product\.system_ext\.manufacturer\=Google/g&amp;#39;&lt;/span&gt; /system/system_ext/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.system_ext\.brand.*/ro\.product\.system_ext\.brand\=google/g&amp;#39;&lt;/span&gt; /system/system_ext/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.odm\.model.*/ro\.product\.odm\.model\=Pixel\ 5\ XL/g&amp;#39;&lt;/span&gt; /vendor/odm/etc/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.odm\.manufacturer.*/ro\.product\.odm\.manufacturer\=Google/g&amp;#39;&lt;/span&gt; /vendor/odm/etc/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.odm\.brand.*/ro\.product\.odm\.brand\=google/g&amp;#39;&lt;/span&gt; /vendor/odm/etc/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.vendor\.model.*/ro\.product\.vendor\.model\=Pixel\ 5\ XL/g&amp;#39;&lt;/span&gt; /vendor/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.vendor\.manufacturer.*/ro\.product\.vendor\.manufacturer\=Google/g&amp;#39;&lt;/span&gt; /vendor/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;sed -ie &lt;span class="s1"&gt;&amp;#39;s/^ro\.product\.vendor\.brand.*/ro\.product\.vendor\.brand\=google/g&amp;#39;&lt;/span&gt; /vendor/build.prop&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;********* DONE&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;重启了以后似乎并不起作用，好吧，换一个，毕竟我们是有 root&amp;nbsp;的人。&lt;/p&gt;
&lt;p&gt;钛备份，幸运破解器 都只能查权限并不能修改，另一软件 &lt;span class="caps"&gt;APP&lt;/span&gt; &lt;span class="caps"&gt;OPS&lt;/span&gt;&amp;nbsp;可以改，但是也没起作用，重启一下权限又回去了。&lt;/p&gt;
&lt;p&gt;用 &lt;span class="caps"&gt;ADB&lt;/span&gt;&amp;nbsp;修改应用权限提示出错了。&lt;/p&gt;
&lt;p&gt;然后就开始浏览一下系统目录看看能不能发现什么猫腻，果然发现了 &lt;code&gt;premissions&lt;/code&gt; 的目录，打开一看还真是应用权限的描述文件，下手试试吧。&lt;/p&gt;
&lt;p&gt;依然是&amp;nbsp;shell:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;********* Modify Product Premissions&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;permDir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/system/product/etc/permissions&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;permFile&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;com.google.android.gms.xml&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;com.google.android.googlequicksearchbox.xml&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;com.android.vending.xml&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;permFile&lt;/span&gt;&lt;span class="p"&gt;[@]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;do&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -f &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$permDir&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;* modify: &lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        sed -ie &lt;span class="s1"&gt;&amp;#39;s/&amp;lt;permission name=&amp;quot;android.permission.READ_PHONE_STATE&amp;quot; \/&amp;gt;/&amp;lt;deny-permission name=&amp;quot;android.permission.READ_PHONE_STATE&amp;quot; \/&amp;gt;/g&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$permDir&lt;/span&gt;/&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        sed -ie &lt;span class="s1"&gt;&amp;#39;s/&amp;lt;permission name=&amp;quot;android.permission.READ_PRIVILEGED_PHONE_STATE&amp;quot; \/&amp;gt;/&amp;lt;deny-permission name=&amp;quot;android.permission.READ_PRIVILEGED_PHONE_STATE&amp;quot; \/&amp;gt;/g&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$permDir&lt;/span&gt;/&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;else&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;- Not Found file: &lt;/span&gt;&lt;span class="nv"&gt;$permDir&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;done&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;重启一下，居然出来了，但是 google&amp;nbsp;这应用没显示，行吧，我清除数据，出来了。&lt;/p&gt;
&lt;p&gt;今天下午开了一下又来了，这下我不敢清数据了，万一又不行了。所以我又加了下面的，还没用就是了。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;perFile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;/system/product/etc/default-permissions/nikgapps-permissions.xml&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;$perFile&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;];&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;* modify: $perFile&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;sed&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ie&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;18,45s/&amp;lt;permission name=&amp;quot;android.permission.READ_PHONE_STATE&amp;quot;/&amp;lt;deny-permission name=&amp;quot;android.permission.READ_PHONE_STATE&amp;quot;/g&amp;#39;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;perFile&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;sed&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ie&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;18,45s/&amp;lt;permission name=&amp;quot;android.permission.READ_PRIVILEGED_PHONE_STATE&amp;quot;/&amp;lt;deny-permission name=&amp;quot;android.permission.READ_PRIVILEGED_PHONE_STATE&amp;quot;/g&amp;#39;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;perFile&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;sed&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ie&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;185,259s/&amp;lt;permission name=&amp;quot;android.permission.READ_PHONE_STATE&amp;quot;/&amp;lt;deny-permission name=&amp;quot;android.permission.READ_PHONE_STATE&amp;quot;/g&amp;#39;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;perFile&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;sed&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ie&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;185,259s/&amp;lt;permission name=&amp;quot;android.permission.READ_PRIVILEGED_PHONE_STATE&amp;quot;/&amp;lt;deny-permission name=&amp;quot;android.permission.READ_PRIVILEGED_PHONE_STATE&amp;quot;/g&amp;#39;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;perFile&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;- Not Found file: $perFile&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;********* DONE&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;希望是有用的吧。&lt;/p&gt;
&lt;p&gt;附一张截图：&lt;/p&gt;
&lt;p&gt;提示截图应用中止了，算了不管了。&lt;/p&gt;
&lt;p&gt;毕竟现在天冷。&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;2021-01-20&lt;/p&gt;
&lt;p&gt;补上图：&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="images/a001-1.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;另外，如果 google now 不显示，确认一下梯子 google&amp;nbsp;搜的时候是不是要人机验证。（我就碰到了，我还以为失败了，换一梯子就可以了。&lt;/p&gt;</content><category term="android"></category><category term="miui"></category><category term="mi9se"></category><category term="android"></category><category term="android11"></category><category term="google"></category><category term="twrp"></category><category term="magisk"></category><category term="recovery"></category></entry></feed>